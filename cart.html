<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Giá» hÃ ng cá»§a báº¡n</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Giá» HÃ ng Cá»§a Báº¡n</h1>
        <nav>
            <a href="index.html">â† Quay láº¡i mua hÃ ng</a>
        </nav>
    </header>

    <main>
        <h2>Giá» hÃ ng cá»§a báº¡n</h2>
<table id="cart-table">
    <thead>
        <tr>
            <th>TÃªn sáº£n pháº©m</th>
            <th>ÄÆ¡n giÃ¡</th>
            <th>Sá»‘ lÆ°á»£ng</th>
            <th>ThÃ nh tiá»n</th>
            <th></th> <!-- Cá»™t XÃ³a -->
        </tr>
    </thead>
    <tbody id="cart-items"></tbody>
</table>

<p class="total-line"><strong>Tá»•ng cá»™ng: </strong><span id="cart-total">0</span> Ä‘</p>
<button id="checkout-btn">Thanh toÃ¡n</button>

    </main>

    <footer>
        <p>&copy; 2025 Cá»­a hÃ ng Táº¡p hÃ³a</p>
    </footer>

    <script>
        // Äá»c dá»¯ liá»‡u tá»« localStorage
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        function removeFromCart(index) {
    cart.splice(index, 1);
    saveCart();
    updateCartDisplay();
}
       function updateCartDisplay() {
    const cartItems = document.getElementById("cart-items");
    const cartTotal = document.getElementById("cart-total");

    cartItems.innerHTML = "";
    let total = 0;

    cart.forEach((item, index) => {
        const row = document.createElement("tr");

        // TÃªn sáº£n pháº©m
        const nameCell = document.createElement("td");
        nameCell.setAttribute("data-label", "TÃªn SP");
        nameCell.textContent = item.name;
        row.appendChild(nameCell);

        // ÄÆ¡n giÃ¡
        const priceCell = document.createElement("td");
        priceCell.setAttribute("data-label", "ÄÆ¡n giÃ¡");
        priceCell.textContent = item.price.toLocaleString() + " Ä‘";
        row.appendChild(priceCell);

        // Sá»‘ lÆ°á»£ng vá»›i nÃºt + vÃ  -
        const quantityCell = document.createElement("td");
        quantityCell.setAttribute("data-label", "Sá»‘ lÆ°á»£ng");

        // NÃºt -
        const minusBtn = document.createElement("button");
        minusBtn.textContent = "-";
        minusBtn.style.marginRight = "8px";
        minusBtn.onclick = () => {
            if (item.quantity > 1) {
                item.quantity--;
                localStorage.setItem("cart", JSON.stringify(cart));
                updateCartDisplay();
            }
        };

        // Sá»‘ lÆ°á»£ng hiá»ƒn thá»‹
        const quantityText = document.createElement("span");
        quantityText.textContent = item.quantity;

        // NÃºt +
        const plusBtn = document.createElement("button");
        plusBtn.textContent = "+";
        plusBtn.style.marginLeft = "8px";
        plusBtn.onclick = () => {
            item.quantity++;
            localStorage.setItem("cart", JSON.stringify(cart));
            updateCartDisplay();
        };

        quantityCell.appendChild(minusBtn);
        quantityCell.appendChild(quantityText);
        quantityCell.appendChild(plusBtn);
        row.appendChild(quantityCell);

        // ThÃ nh tiá»n
        const totalCell = document.createElement("td");
        totalCell.setAttribute("data-label", "ThÃ nh tiá»n");
        const itemTotal = item.price * item.quantity;
        total += itemTotal;
        totalCell.textContent = itemTotal.toLocaleString() + " Ä‘";
        row.appendChild(totalCell);

        // NÃºt xÃ³a
        const deleteCell = document.createElement("td");
        deleteCell.setAttribute("data-label", "XÃ³a");
        const deleteBtn = document.createElement("button");
        deleteBtn.textContent = "X";
        deleteBtn.style.color = "red";
        deleteBtn.onclick = () => {
            cart.splice(index, 1);
            localStorage.setItem("cart", JSON.stringify(cart));
            updateCartDisplay();
        };
        deleteCell.appendChild(deleteBtn);
        row.appendChild(deleteCell);

        cartItems.appendChild(row);
    });

    cartTotal.textContent = total.toLocaleString();
}




        // Gá»i khi trang load
        window.onload = updateCartDisplay;
        document.getElementById("checkout-btn").onclick = function () {
    if (cart.length === 0) {
        alert("Giá» hÃ ng cá»§a báº¡n Ä‘ang trá»‘ng!");
        return;
    }

    const confirmCheckout = confirm("Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n thanh toÃ¡n?");
    if (confirmCheckout) {
        // Xá»­ lÃ½ thanh toÃ¡n (giáº£ láº­p)
       document.getElementById("checkout-btn").onclick = function () {
    if (cart.length === 0) {
        alert("Giá» hÃ ng cá»§a báº¡n Ä‘ang trá»‘ng!");
        return;
    }

    const confirmCheckout = confirm("Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n thanh toÃ¡n?");
    if (!confirmCheckout) return;

    // Chuáº©n bá»‹ ná»™i dung Ä‘Æ¡n hÃ ng
    let message = "ğŸ›’ ÄÆ¡n hÃ ng cá»§a báº¡n:\n";
    let total = 0;

    cart.forEach(item => {
        message += `- ${item.name} x ${item.quantity}\n`;
        total += item.price * item.quantity;
    });

    message += `\nğŸ’° Tá»•ng cá»™ng: ${total.toLocaleString()} Ä‘`;

    // Xá»­ lÃ½ gá»­i Ä‘Æ¡n hÃ ng
    const channel = prompt(
        "Báº¡n muá»‘n gá»­i Ä‘Æ¡n hÃ ng qua Ä‘Ã¢u?\n1: Zalo\n2: Messenger\n3: Telegram\n\n(Nháº­p sá»‘ 1, 2 hoáº·c 3)"
    );

    if (!channel) return;

    const encodedMessage = encodeURIComponent(message);

    if (channel === "1") {
        // Zalo
        alert("Báº¡n sáº½ Ä‘Æ°á»£c chuyá»ƒn sang Zalo Ä‘á»ƒ gá»­i Ä‘Æ¡n.");
        window.open(`https://zalo.me/`, "_blank");
    } else if (channel === "2") {
        // Messenger
        alert("Báº¡n sáº½ Ä‘Æ°á»£c chuyá»ƒn sang Messenger Ä‘á»ƒ gá»­i Ä‘Æ¡n.");
        window.open(`https://m.me/`, "_blank");
    } else if (channel === "3") {
        // Telegram
        alert("Báº¡n sáº½ Ä‘Æ°á»£c chuyá»ƒn sang Telegram Ä‘á»ƒ gá»­i Ä‘Æ¡n.");
        window.open(`https://t.me/share/url?url=&text=${encodedMessage}`, "_blank");
    } else {
        alert("Lá»±a chá»n khÃ´ng há»£p lá»‡. Vui lÃ²ng thá»­ láº¡i.");
        return;
    }

    // XÃ³a giá» hÃ ng
    cart = [];
    localStorage.removeItem("cart");
    updateCartDisplay();
};

    }
};

    </script>
<!-- Popup chá»n hÃ¬nh thá»©c gá»­i -->
<div id="send-options" style="display: none;">
    <div class="popup">
        <h3>Chá»n cÃ¡ch gá»­i Ä‘Æ¡n hÃ ng</h3>
        <button onclick="sendOrder('zalo')">ğŸ“± Gá»­i qua Zalo</button>
        <button onclick="sendOrder('messenger')">ğŸ’¬ Gá»­i qua Messenger</button>
        <button onclick="sendOrder('telegram')">ğŸ“¨ Gá»­i qua Telegram</button>
    </div>
</div>
</body>
</html>
