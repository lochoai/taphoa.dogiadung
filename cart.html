// Khi trang load, cáº­p nháº­t giá» hÃ ng
window.onload = updateCartDisplay;

// Xá»­ lÃ½ nÃºt "Thanh toÃ¡n"
document.getElementById("checkout-btn").onclick = function () {
    if (cart.length === 0) {
        alert("Giá» hÃ ng cá»§a báº¡n Ä‘ang trá»‘ng!");
        return;
    }

    const confirmCheckout = confirm("Báº¡n cÃ³ cháº¯c cháº¯n muá»‘n thanh toÃ¡n?");
    if (!confirmCheckout) return;

    // Hiá»‡n popup chá»n hÃ¬nh thá»©c gá»­i
    document.getElementById("send-options").style.display = "flex";
};

// HÃ m gá»­i Ä‘Æ¡n hÃ ng theo phÆ°Æ¡ng thá»©c ngÆ°á»i dÃ¹ng chá»n
function sendOrder(method) {
    let message = "ğŸ›’ ÄÆ¡n hÃ ng cá»§a báº¡n:\n";
    let total = 0;

    cart.forEach(item => {
        message += `- ${item.name} x ${item.quantity}\n`;
        total += item.price * item.quantity;
    });

    message += `\nğŸ’° Tá»•ng cá»™ng: ${total.toLocaleString()} Ä‘`;
    const encodedMessage = encodeURIComponent(message);

    // áº¨n popup
    document.getElementById("send-options").style.display = "none";

    // Má»Ÿ á»©ng dá»¥ng tÆ°Æ¡ng á»©ng
    if (method === "zalo") {
        alert("Báº¡n sáº½ Ä‘Æ°á»£c chuyá»ƒn sang Zalo Ä‘á»ƒ gá»­i Ä‘Æ¡n.");
        window.open("https://zalo.me/", "_blank");
    } else if (method === "messenger") {
        alert("Báº¡n sáº½ Ä‘Æ°á»£c chuyá»ƒn sang Messenger Ä‘á»ƒ gá»­i Ä‘Æ¡n.");
        window.open("https://m.me/", "_blank");
    } else if (method === "telegram") {
        window.open(`https://t.me/share/url?url=&text=${encodedMessage}`, "_blank");
    }

    // XÃ³a giá» hÃ ng
    cart = [];
    localStorage.removeItem("cart");
    updateCartDisplay();
}
