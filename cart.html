<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <title>Giỏ hàng của bạn</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <h1>Giỏ Hàng Của Bạn</h1>
        <nav>
            <a href="index.html">← Quay lại mua hàng</a>
        </nav>
    </header>

    <main>
        <h2>Giỏ hàng của bạn</h2>
<table id="cart-table">
    <thead>
        <tr>
            <th>Tên sản phẩm</th>
            <th>Đơn giá</th>
            <th>Số lượng</th>
            <th>Thành tiền</th>
            <th></th> <!-- Cột Xóa -->
        </tr>
    </thead>
    <tbody id="cart-items"></tbody>
</table>

<p class="total-line"><strong>Tổng cộng: </strong><span id="cart-total">0</span> đ</p>
<button id="checkout-btn">Thanh toán</button>

    </main>

    <footer>
        <p>&copy; 2025 Cửa hàng Tạp hóa</p>
    </footer>

    <script>
        // Đọc dữ liệu từ localStorage
        let cart = JSON.parse(localStorage.getItem('cart')) || [];

        function removeFromCart(index) {
    cart.splice(index, 1);
    saveCart();
    updateCartDisplay();
}
        function updateCartDisplay() {
    const cartItems = document.getElementById("cart-items");
    const cartTotal = document.getElementById("cart-total");

    cartItems.innerHTML = "";
    let total = 0;

    cart.forEach((item, index) => {
        const li = document.createElement("li");
        li.textContent = `${item.name} - ${item.price.toLocaleString()} đ x ${item.quantity}`;

        const btnDelete = document.createElement("button");
        btnDelete.textContent = "Xóa";
        btnDelete.style.marginLeft = "10px";
        btnDelete.onclick = () => removeFromCart(index);

        li.appendChild(btnDelete);
        cartItems.appendChild(li);

        total += item.price * item.quantity;
    });

    cartTotal.textContent = total.toLocaleString();
}

        // Gọi khi trang load
        window.onload = updateCartDisplay;
        document.getElementById("checkout-btn").onclick = function () {
    if (cart.length === 0) {
        alert("Giỏ hàng của bạn đang trống!");
        return;
    }

    const confirmCheckout = confirm("Bạn có chắc chắn muốn thanh toán?");
    if (confirmCheckout) {
        // Xử lý thanh toán (giả lập)
        alert("Cảm ơn bạn đã mua hàng! Đơn hàng của bạn đang được xử lý.");

        // Xóa giỏ hàng
        cart = [];
        localStorage.removeItem('cart');

        // Cập nhật lại giao diện
        updateCartDisplay();

        // Quay lại trang chủ sau 2 giây
        setTimeout(() => {
            window.location.href = "index.html";
        }, 2000);
    }
};

    </script>
</body>
</html>
